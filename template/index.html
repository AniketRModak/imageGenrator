<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>AI Image Generator</title>
		<link rel="stylesheet" href="/static/style.css" />
		<link
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
			rel="stylesheet"
			integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM"
			crossorigin="anonymous"
		/>
	</head>
	<body>
		<nav class="nav">
			<div class="container">
				<div class="logo">
					<a href="#">AI Image Generator</a>
				</div>
				<div class="main_list" id="mainListDiv">
					<ul>
						<li><a href="#">Home</a></li>
						<li><a href="#">Project</a></li>
						<li><a href="#">COntact</a></li>
						<li><a href="/about">About</a></li>
					</ul>
				</div>
				<div class="media_button">
					<button class="main_media_button" id="mediaButton">
						<span></span>
						<span></span>
						<span></span>
					</button>
				</div>
			</div>
		</nav>

		<div class="container">
			<form>
				<div class="mb-3">
					<h2 for="exampleInputEmail1" class="form-label">
						Enter your Prompt to generate Image
					</h2>
					<input
						id="imgprompt"
						type="text"
						class="form-control"
						aria-describedby="emailHelp"
					/>
					<div class="form-text">We'll fetch the image from OpenAI</div>
				</div>
				<button id="submitbtn" type="submit" class="btn btn-primary">
					Submit
				</button>
			</form>

			<div class="container my-4">
				<div class="svgContainer d-flex">
					<svg
						class="d-none"
						id="loadingGif"
						xmlns="http://www.w3.org/2000/svg"
						xmlns:xlink="http://www.w3.org/1999/xlink"
						style="margin: auto; background: #fff"
						width="200px"
						height="200px"
						viewBox="0 0 100 100"
						preserveAspectRatio="xMidYMid"
					>
						<g transform="rotate(0 50 50)">
							<rect
								x="47"
								y="24"
								rx="3"
								ry="6"
								width="6"
								height="12"
								fill="#000000"
							>
								<animate
									attributeName="opacity"
									values="1;0"
									keyTimes="0;1"
									dur="1s"
									begin="-0.9166666666666666s"
									repeatCount="indefinite"
								></animate>
							</rect>
						</g>
						<g transform="rotate(30 50 50)">
							<rect
								x="47"
								y="24"
								rx="3"
								ry="6"
								width="6"
								height="12"
								fill="#000000"
							>
								<animate
									attributeName="opacity"
									values="1;0"
									keyTimes="0;1"
									dur="1s"
									begin="-0.8333333333333334s"
									repeatCount="indefinite"
								></animate>
							</rect>
						</g>
						<g transform="rotate(60 50 50)">
							<rect
								x="47"
								y="24"
								rx="3"
								ry="6"
								width="6"
								height="12"
								fill="#000000"
							>
								<animate
									attributeName="opacity"
									values="1;0"
									keyTimes="0;1"
									dur="1s"
									begin="-0.75s"
									repeatCount="indefinite"
								></animate>
							</rect>
						</g>
						<g transform="rotate(90 50 50)">
							<rect
								x="47"
								y="24"
								rx="3"
								ry="6"
								width="6"
								height="12"
								fill="#000000"
							>
								<animate
									attributeName="opacity"
									values="1;0"
									keyTimes="0;1"
									dur="1s"
									begin="-0.6666666666666666s"
									repeatCount="indefinite"
								></animate>
							</rect>
						</g>
						<g transform="rotate(120 50 50)">
							<rect
								x="47"
								y="24"
								rx="3"
								ry="6"
								width="6"
								height="12"
								fill="#000000"
							>
								<animate
									attributeName="opacity"
									values="1;0"
									keyTimes="0;1"
									dur="1s"
									begin="-0.5833333333333334s"
									repeatCount="indefinite"
								></animate>
							</rect>
						</g>
						<g transform="rotate(150 50 50)">
							<rect
								x="47"
								y="24"
								rx="3"
								ry="6"
								width="6"
								height="12"
								fill="#000000"
							>
								<animate
									attributeName="opacity"
									values="1;0"
									keyTimes="0;1"
									dur="1s"
									begin="-0.5s"
									repeatCount="indefinite"
								></animate>
							</rect>
						</g>
						<g transform="rotate(180 50 50)">
							<rect
								x="47"
								y="24"
								rx="3"
								ry="6"
								width="6"
								height="12"
								fill="#000000"
							>
								<animate
									attributeName="opacity"
									values="1;0"
									keyTimes="0;1"
									dur="1s"
									begin="-0.4166666666666667s"
									repeatCount="indefinite"
								></animate>
							</rect>
						</g>
						<g transform="rotate(210 50 50)">
							<rect
								x="47"
								y="24"
								rx="3"
								ry="6"
								width="6"
								height="12"
								fill="#000000"
							>
								<animate
									attributeName="opacity"
									values="1;0"
									keyTimes="0;1"
									dur="1s"
									begin="-0.3333333333333333s"
									repeatCount="indefinite"
								></animate>
							</rect>
						</g>
						<g transform="rotate(240 50 50)">
							<rect
								x="47"
								y="24"
								rx="3"
								ry="6"
								width="6"
								height="12"
								fill="#000000"
							>
								<animate
									attributeName="opacity"
									values="1;0"
									keyTimes="0;1"
									dur="1s"
									begin="-0.25s"
									repeatCount="indefinite"
								></animate>
							</rect>
						</g>
						<g transform="rotate(270 50 50)">
							<rect
								x="47"
								y="24"
								rx="3"
								ry="6"
								width="6"
								height="12"
								fill="#000000"
							>
								<animate
									attributeName="opacity"
									values="1;0"
									keyTimes="0;1"
									dur="1s"
									begin="-0.16666666666666666s"
									repeatCount="indefinite"
								></animate>
							</rect>
						</g>
						<g transform="rotate(300 50 50)">
							<rect
								x="47"
								y="24"
								rx="3"
								ry="6"
								width="6"
								height="12"
								fill="#000000"
							>
								<animate
									attributeName="opacity"
									values="1;0"
									keyTimes="0;1"
									dur="1s"
									begin="-0.08333333333333333s"
									repeatCount="indefinite"
								></animate>
							</rect>
						</g>
						<g transform="rotate(330 50 50)">
							<rect
								x="47"
								y="24"
								rx="3"
								ry="6"
								width="6"
								height="12"
								fill="#000000"
							>
								<animate
									attributeName="opacity"
									values="1;0"
									keyTimes="0;1"
									dur="1s"
									begin="0s"
									repeatCount="indefinite"
								></animate>
							</rect>
						</g>
					</svg>
				</div>
				<div class="row imageCont"></div>
			</div>
		</div>

		<script
			src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
			integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz"
			crossorigin="anonymous"
		></script>
		<script>
			var mainListDiv = document.getElementById("mainListDiv"),
				mediaButton = document.getElementById("mediaButton");

			mediaButton.onclick = function () {
				"use strict";

				mainListDiv.classList.toggle("show_list");
				mediaButton.classList.toggle("active");
			};
			submitbtn.addEventListener("click", (e) => {
				loadingGif.classList.toggle("d-none");
				e.preventDefault();
				const promptTxt = imgprompt.value;
				fetch("/generateimages/" + promptTxt)
					.then((response) => response.json())
					.then((data) => {
						loadingGif.classList.toggle("d-none");
						console.log(data);
						const images = data.data;
						const container = document.querySelector(".imageCont");
						let totalHtml = "";

						images.forEach((image) => {
							let html = `<div class="col-md-4 my-2">
            <img width="340" src="${image.url}" class="img-responsive">
        </div>`;
							totalHtml += html;
						});
						container.innerHTML = totalHtml;
					});
			});
		</script>
	</body>
</html>
